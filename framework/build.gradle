dependencies {
  api('com.google.code.findbugs:jsr305:3.0.2')
  implementation('io.github.classgraph:classgraph:4.8.165')
  api('com.zaxxer:HikariCP:5.1.0')
  api('com.google.code.gson:gson:2.10.1')
  api('com.jamonapi:jamon:2.82') {transitive = false}
  // Cannot upgrade to org.asynchttpclient:async-http-client as that requires Netty4 and we use Netty3
  implementation('com.ning:async-http-client:1.9.40') {
    exclude group: 'io.netty'
  }
  api('com.google.guava:guava:33.0.0-jre') {transitive = false}
  api('commons-beanutils:commons-beanutils:1.9.4') {transitive = false}
  api('commons-codec:commons-codec:1.16.0') {transitive = false}
  api('org.apache.commons:commons-email:1.5') {transitive = false}
  api('commons-fileupload:commons-fileupload:1.5')
  api('commons-io:commons-io:2.15.1')
  implementation("org.apache.commons:commons-lang3:$commonsLangVersion")
  implementation "org.apache.commons:commons-text:$commonsTextVersion"
  implementation 'com.github.f4b6a3:ulid-creator:5.2.2'
  api('commons-logging:commons-logging:1.3.0')
  api('javax.mail:mail:1.4.7')
  api('javax.inject:javax.inject:1')
  api('jakarta.inject:jakarta.inject-api:2.0.1')
  implementation('ch.qos.reload4j:reload4j:1.2.25')
  implementation('org.ehcache:ehcache:3.10.8')
  api('net.sf.oval:oval:3.2.1')
  // Groovy 4 can be found in org.apache.groovy
  api("org.codehaus.groovy:groovy:$groovyVersion")
  api("org.codehaus.groovy:groovy-xml:$groovyVersion")
  api('org.hibernate:hibernate-core-jakarta:5.6.15.Final')
  // Hibernate 5.6 series is only compatible with persistence-api:3.0.0
  api('jakarta.persistence:jakarta.persistence-api:3.1.0')
  api('org.hibernate.common:hibernate-commons-annotations:6.0.6.Final')
  implementation('org.hibernate:hibernate-ehcache:5.6.15.Final') {transitive = false}
  api("org.slf4j:slf4j-api:$slf4jVersion")
  api("org.slf4j:slf4j-reload4j:$slf4jVersion")
  api("org.slf4j:jul-to-slf4j:$slf4jVersion")
  api('net.spy:spymemcached:2.12.3')
}

task generateReplayVersion(type: Exec) {
  commandLine 'git', 'describe', '--always'
  standardOutput out

  doFirst {
     standardOutput new FileOutputStream("${buildDir}/classes/java/main/play/version")
     standardOutput.write((project.version + '-').getBytes('UTF-8'))
  }
}

classes.finalizedBy 'generateReplayVersion'
jar.dependsOn 'generateReplayVersion'

apply from: rootProject.file('gradle/deploy.gradle')
